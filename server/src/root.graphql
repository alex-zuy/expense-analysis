scalar Date
scalar DateTime

type ShopAccount {
    id: ID!
    login: String!
    accessToken: String!
    expiresAt: Date!
    updatedAt: Date!
    importedRangeStart: DateTime
    importedRangeEnd: DateTime
}

type User {
    id: ID!
    email: String!
    fullName: String!
    shopAccount: ShopAccount
}

type ShopAccountCheckResult {
    isSuccess: Boolean!
    error: String
    userName: String
}

type Product {
    id: ID!
    name: String!
    category: Category
    categoryPath: [Category!]!
    tags: [Tag!]!
}

type Purchase {
    id: ID!
    amount: Float!
    pricePerUnit: Float!
    purchasedAt: DateTime!
    product: Product!
}

type PurchasesGroup {
    id: ID!
    purchasedAt: DateTime!
    items: [Purchase!]!
    totalPrice: Float!
}

type ProductExpense {
    id: ID!
    product: Product!
    expense: Float!
}

type Category {
    id: ID!
    name: String!
    color: String!
    parent: Category
}

type Tag {
    id: ID!
    name: String!
    color: String!
}

type Query {
    self: User!
    shopAccountCheck(accessToken: String!): ShopAccountCheckResult!
    purchasesGroups(dateFrom: DateTime!, dateTo: DateTime!): [PurchasesGroup!]!
    categories: [Category]!
    tags: [Tag]!
    productsExpenses: [ProductExpense!]!
}

input ShopAccountUpdateInput {
    login: String!
    accessToken: String!
    expiresAt: String!
}

input PurchasesHistoryImportInput {
    dateFrom: DateTime!
    dateTo: DateTime!
}

type Mutation {
    updateShopAccount(input: ShopAccountUpdateInput!): ShopAccount!
    importPurchasesHistory(input: PurchasesHistoryImportInput!): ShopAccount!
}
